# 1. 实体表

实体表就是一个实际对象的表，实体表它放的数据一定是一条条客观存在的事物数据，比如一条评论、一个商品、一条购买记录等等。

实体表之间存在关联关系，也就是实体-关系表——我们熟悉的ER关系。使用实体表的服务，一般只关注当前的状态，保证业务逻辑下数据的原子性和完整性。

实体表之间通过外键进行关联，



# 2. 事实表

事实表其实质就是通过各种维度和一些指标值得组合来确定一个事实的。



# 3. 维度表

维度表可以看成是用户用来分析一个事实的窗口，它里面的数据应该是对事实的各个方面描述，比如时间维度表，它里面的数据就是一些日，周，月，季，年，日期等数据，维度表只能是事实表的一个分析角度。

<img title="" src="file:///Users/panyongfeng/Documents/basic_framework/wiki/大数据系统/数据仓库/维度建模/pics/事实表维度表.png" alt="事实表维度表.png" width="456">

上图表示了一个三维表，“时间”、“区域”、“运输方式”。每个维度有自己的维度单元，比如“时间”维度按季度为一个单元。一个维度可以进行上钻和下钻，为了减少维度表的计算量，数仓可以维护一些中间数据维度表（如图中的“上半年”和“下半年”）。

## 3.1 维度表存储

![维度表切片.png](/Users/panyongfeng/Documents/basic_framework/wiki/大数据系统/数据仓库/维度建模/pics/维度表切片.png)

<img src="file:///Users/panyongfeng/Documents/basic_framework/wiki/大数据系统/数据仓库/维度建模/pics/维度表总体.png" title="" alt="维度表总体.png" data-align="center">

$$
存储数据量= \Pi 维度中元素数量
$$

如上图所示，数据划分为3个维度：年份，国家，奖牌类型

每个维度有3个元素，比如：年份（2004、2008、2012），国家（USA、CHINA、GB），奖牌类型（GOLD、SILVER、BRONZE）

所以数仓需要存储3\*3\*3=27个元素的数据。

（如果需要下钻，则应以元素最多的场景存储或者分层存储）














